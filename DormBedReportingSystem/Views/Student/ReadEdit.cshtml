@model DormBedReportingSystem.Models.ReadEditRow


@{
    Layout = null;
    List<Beds> bedData = new List<Beds>();

}

<!DOCTYPE html>

<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=11">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="~/css/Index.css" />
    <script src="C:\Users\bigra\source\repos\DormBedReportingSystem\DormBedReportingSystem\wwwroot\scripts\jquery-3.5.1.min.js" type="text/javascript"></script>
    <style>

        body {
            background-color: #FFFFF3;
            padding-top: 10px;
        }

        .wide {
            width: 60px;
        }

        .commentsArea {
            width: 550px;
            height: 80px;
        }

        .demo {
            border: 1px solid #C0C0C0;
            border-collapse: collapse;
            padding: 5px;
            margin-bottom: 100px;
            width: 500px;
        }

            .demo th {
                border: 1px solid #C0C0C0;
                padding: 5px;
            }

            .demo td {
                border: 1px solid #C0C0C0;
                padding: 5px;
            }

        #fullCapacityBeds th {
            background-color: #287aff;
            font-size: 19px;
        }

        #occupiedBeds th {
            background-color: yellow;
            font-size: 19px;
        }
    </style>

    <title>Dorm Bed Capactiy Reporting System</title>
</head>
<body onload="updateTotal()">


         @using (Html.BeginForm("Update", "Student", new { id = Model.id }, FormMethod.Post))
    {


        <div style="margin-bottom:50px" id="regionInfo">
            <p style="margin:0">@Html.DisplayFor(m => Model.REGION_NAME) Region</p>
            <p style="text-indent:10px; margin:0">@Html.DisplayFor(m => Model.CENTER_NAME)</p>
            <p style="text-indent:20px; margin:0">@Html.DisplayFor(m => Model.BLDG_NAME)</p>
            <p style="text-indent:30px; font-weight:bold; font-size:22px; margin:0">@Html.DisplayFor(m => Model.WING_NAME)</p>
        </div>

        <table id="fullCapacityBeds" class="demo">
            <caption>Full Capacity Beds</caption>
            <thead>
                <tr>
                    <th>1 Bed</th>
                    <th>2 Beds</th>
                    <th>3 Beds</th>
                    <th>4 Beds</th>
                    <th>5 Beds</th>
                    <th>6 Beds</th>
                    <th>7 Beds</th>
                    <th>8 Beds</th>
                    <th>9 Beds</th>
                    <th>10 Beds</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                <tr style="width:100px">
                    <td>
                        @Html.TextBoxFor(m => Model.CAP_1BED, new { @onblur = "updateTotal()", @class = "wide" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => Model.CAP_2BEDS, new { @onblur = "updateTotal()", @class = "wide" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => Model.CAP_3BEDS, new { @onblur = "updateTotal()", @class = "wide" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => Model.CAP_4BEDS, new { @onblur = "updateTotal()", @class = "wide" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => Model.CAP_5BEDS, new { @onblur = "updateTotal()", @class = "wide" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => Model.CAP_6BEDS, new { @onblur = "updateTotal()", @class = "wide" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => Model.CAP_7BEDS, new { @onblur = "updateTotal()", @class = "wide" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => Model.CAP_8BEDS, new { @onblur = "updateTotal()", @class = "wide" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => Model.CAP_9BEDS, new { @onblur = "updateTotal()", @class = "wide" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => Model.CAP_10BEDS, new { @onblur = "updateTotal()", @class = "wide" })
                    </td>
                    <td>
                        <input readonly class="wide" id="CAP_Total" type="text" />
                    </td>
                </tr>
            </tbody>
        </table>

        <table id="occupiedBeds" class="demo">
            <caption>Current Occupancy Beds</caption>
            <thead>
                <tr>
                    <th>1 Bed</th>
                    <th>2 Beds</th>
                    <th>3 Beds</th>
                    <th>4 Beds</th>
                    <th>5 Beds</th>
                    <th>6 Beds</th>
                    <th>7 Beds</th>
                    <th>8 Beds</th>
                    <th>9 Beds</th>
                    <th>10 Beds</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        @Html.TextBoxFor(m => Model.OCC_1BED, new { @onblur = "updateTotal()", @class = "wide" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => Model.OCC_2BEDS, new { @onblur = "updateTotal()", @class = "wide" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => Model.OCC_3BEDS, new { @onblur = "updateTotal()", @class = "wide" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => Model.OCC_4BEDS, new { @onblur = "updateTotal()", @class = "wide" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => Model.OCC_5BEDS, new { @onblur = "updateTotal()", @class = "wide" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => Model.OCC_6BEDS, new { @onblur = "updateTotal()", @class = "wide" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => Model.OCC_7BEDS, new { @onblur = "updateTotal()", @class = "wide" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => Model.OCC_8BEDS, new { @onblur = "updateTotal()", @class = "wide" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => Model.OCC_9BEDS, new { @onblur = "updateTotal()", @class = "wide" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => Model.OCC_10BEDS, new { @onblur = "updateTotal()", @class = "wide" })
                    </td>
                    <td>
                        <input readonly class="wide" id="OCC_Total" type="text" />
                    </td>
                </tr>
            </tbody>
        </table>

        <input id="Submit" type="submit" value="Update" />
        <p style="color:red" id="errorMessage">Please explain why Occupancy exceeds Capacity</p>
        @Html.TextAreaFor(m => Model.BedComments, new { onblur = "validateText()", style = "display:none", @class = "commentsArea" })
    }
    

    <script type="text/javascript">
        function updateTotal() {
            var occ_1bed = parseInt(document.getElementById('OCC_1BED').value) * 1;
            var occ_2bed = parseInt(document.getElementById('OCC_2BEDS').value) * 2;
            var occ_3bed = parseInt(document.getElementById('OCC_3BEDS').value) * 3;
            var occ_4bed = parseInt(document.getElementById('OCC_4BEDS').value) * 4;
            var occ_5bed = parseInt(document.getElementById('OCC_5BEDS').value) * 5;
            var occ_6bed = parseInt(document.getElementById('OCC_6BEDS').value) * 6;
            var occ_7bed = parseInt(document.getElementById('OCC_7BEDS').value) * 7;
            var occ_8bed = parseInt(document.getElementById('OCC_8BEDS').value) * 8;
            var occ_9bed = parseInt(document.getElementById('OCC_9BEDS').value) * 9;
            var occ_10bed = parseInt(document.getElementById('OCC_10BEDS').value) * 10;

            var occTotal = occ_1bed + occ_2bed + occ_3bed + occ_4bed + occ_5bed + occ_6bed + occ_7bed + occ_8bed + occ_9bed + occ_10bed;
            document.getElementById("OCC_Total").value = occTotal;

            var cap_1bed = parseInt(document.getElementById('CAP_1BED').value) * 1;
            var cap_2bed = parseInt(document.getElementById('CAP_2BEDS').value) * 2;
            var cap_3bed = parseInt(document.getElementById('CAP_3BEDS').value) * 3;
            var cap_4bed = parseInt(document.getElementById('CAP_4BEDS').value) * 4;
            var cap_5bed = parseInt(document.getElementById('CAP_5BEDS').value) * 5;
            var cap_6bed = parseInt(document.getElementById('CAP_6BEDS').value) * 6;
            var cap_7bed = parseInt(document.getElementById('CAP_7BEDS').value) * 7;
            var cap_8bed = parseInt(document.getElementById('CAP_8BEDS').value) * 8;
            var cap_9bed = parseInt(document.getElementById('CAP_9BEDS').value) * 9;
            var cap_10bed = parseInt(document.getElementById('CAP_10BEDS').value) * 10;

            var capTotal = cap_1bed + cap_2bed + cap_3bed + cap_4bed + cap_5bed + cap_6bed + cap_7bed + cap_8bed + cap_9bed + cap_10bed;
            document.getElementById("CAP_Total").value = capTotal;

            var textArea = document.getElementById('BedComments');

            if (occTotal > capTotal) {
                textArea.style.display = "block";
                var submitBtn = document.getElementById("Submit")
                submitBtn.disabled = true;
                var errorMessage = document.getElementById("errorMessage")
                errorMessage.hidden = false;
            }
            else {
                textArea.style.display = "none";
                textArea.value = ""
                var submitBtn = document.getElementById("Submit")
                submitBtn.disabled = false;
                var errorMessage = document.getElementById("errorMessage")
                errorMessage.hidden = true;
            }

        }

        function validateText() {
            var textAreaValue = document.getElementById('BedComments').value;
            if (!textAreaValue) {
                var submitBtn = document.getElementById("Submit")
                submitBtn.disabled = true;
                var errorMessage = document.getElementById("errorMessage")
                errorMessage.hidden = false;
            }
            else {
                var submitBtn = document.getElementById("Submit")
                submitBtn.disabled = false;
                var errorMessage = document.getElementById("errorMessage")
                errorMessage.hidden = true;
            }

        }
    </script>


</body>
</html>